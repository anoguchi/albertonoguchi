"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[536],{1409:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>d});var n=o(4848),s=o(8453);const i={id:"ambiente-virtual-pacotes",title:"Ambientes virtuais e pacotes",tags:["ambiente virtual","pacotes"],sidebar_position:6},r="Ambientes virtuais e pacotes",t={id:"python-base/base/ambiente-virtual-pacotes",title:"Ambientes virtuais e pacotes",description:"At\xe9 agora fizemos um script independente, o nosso hello.py, que n\xe3o possui",source:"@site/docs/python-base/base/ambientes-virtuais.md",sourceDirName:"python-base/base",slug:"/python-base/base/ambiente-virtual-pacotes",permalink:"/albertonoguchi/docs/python-base/base/ambiente-virtual-pacotes",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/python-base/base/ambientes-virtuais.md",tags:[{label:"ambiente virtual",permalink:"/albertonoguchi/docs/tags/ambiente-virtual"},{label:"pacotes",permalink:"/albertonoguchi/docs/tags/pacotes"}],version:"current",sidebarPosition:6,frontMatter:{id:"ambiente-virtual-pacotes",title:"Ambientes virtuais e pacotes",tags:["ambiente virtual","pacotes"],sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Blocos de c\xf3digo",permalink:"/albertonoguchi/docs/python-base/base/blocos-de-codigo"},next:{title:"Java",permalink:"/albertonoguchi/docs/category/java"}},c={},d=[{value:"Qual o Problema?",id:"qual-o-problema",level:2},{value:"Ambiente Real",id:"ambiente-real",level:2},{value:"Ambiente Virtual",id:"ambiente-virtual",level:2},{value:"Criando o Ambiente Virtual",id:"criando-o-ambiente-virtual",level:3},{value:"Git Ignore",id:"git-ignore",level:2},{value:"Instalando Pacotes",id:"instalando-pacotes",level:2}];function l(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.h1,{id:"ambientes-virtuais-e-pacotes",children:"Ambientes virtuais e pacotes"}),"\n",(0,n.jsxs)(a.p,{children:["At\xe9 agora fizemos um script independente, o nosso ",(0,n.jsx)(a.code,{children:"hello.py"}),", que n\xe3o possui\ndepend\xeancias e pode rodar em qualquer ambiente com Python."]}),"\n",(0,n.jsx)(a.p,{children:"Por\xe9m, conforme nossos programas ficam mais complexos, acabamos utilizando\nsolu\xe7\xf5es prontas do ecossistema Python, o PyPI, reposit\xf3rio de pacotes que\noferece mais de 300 mil pacotes para reutilizar."}),"\n",(0,n.jsx)(a.h2,{id:"qual-o-problema",children:"Qual o Problema?"}),"\n",(0,n.jsx)(a.p,{children:"Se instalarmos as bibliotecas do PyPI diretamente no Python principal do\nsistema podemos criar conflitos e deixar o ambiente muito cheio de bibliotecas\nque podem se tornar obsoletas."}),"\n",(0,n.jsx)(a.p,{children:"Para resolver esse problema, o recomendado \xe9 criarmos um sandbox, um ambiente\nseparado onde podemos ter uma c\xf3pia do ambiente Python isolada onde n\xe3o\ncorremos o risco de criar conflitos."}),"\n",(0,n.jsx)(a.h2,{id:"ambiente-real",children:"Ambiente Real"}),"\n",(0,n.jsx)(a.p,{children:"Para saber qual \xe9 o ambiente real do Python, utilize o seguinte comando:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"python3 -m site\n"})}),"\n",(0,n.jsx)(a.p,{children:"Este comando retorna os caminhos de instala\xe7\xe3o do Python e suas bibliotecas,\npara criar um ambiente virtual a partir destes arquivos basta copiarmos tudo\nisso para um novo local isolado."}),"\n",(0,n.jsx)(a.p,{children:"Como este processo \xe9 algo bastante comum de ser feito, o pr\xf3prio Python j\xe1 vem\ncom uma ferramenta que faz essa c\xf3pia automaticamente."}),"\n",(0,n.jsx)(a.h2,{id:"ambiente-virtual",children:"Ambiente Virtual"}),"\n",(0,n.jsx)(a.p,{children:"O ambiente virtual \xe9 um sandbox, \xe9 uma c\xf3pia de todo o ambiente Python. A\nrecomenda\xe7\xe3o \xe9 que voc\xea tenha um ambiente virtual em cada um dos seus projetos;\ncada projeto deve usar seu pr\xf3prio conjunto de bibliotecas isoladamente."}),"\n",(0,n.jsx)(a.h3,{id:"criando-o-ambiente-virtual",children:"Criando o Ambiente Virtual"}),"\n",(0,n.jsxs)(a.p,{children:["Na pasta do seu projeto, usamos o m\xf3dulo ",(0,n.jsx)(a.code,{children:"venv"})," e informamos um nome para a\npasta do ambiente ser criada, \xe9 comum que o nome seja ",(0,n.jsx)(a.code,{children:".venv"})," pois o ",(0,n.jsx)(a.code,{children:"."})," torna\na pasta oculta no seu sistema e esse nome \xe9 comumente adotado."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"cd python-base\npython3 -m venv .venv\n"})}),"\n",(0,n.jsxs)(a.p,{children:["Ao executar esse comando, ir\xe1 notar que foi criada uma nova pasta\nchamada ",(0,n.jsx)(a.code,{children:".venv"})," e dentro dela tem a c\xf3pia de todos os arquivos do Python."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"$ ls -a .venv \n.  ..  bin  include  lib  lib64  pyvenv.cfg  share\n"})}),"\n",(0,n.jsxs)(a.p,{children:["Ali dentro da pasta ",(0,n.jsx)(a.code,{children:"bin"})," \xe9 onde encontramos o ",(0,n.jsx)(a.code,{children:"python"})," e tamb\xe9m outras\nferramentas como o ",(0,n.jsx)(a.code,{children:"pip"})," e a partir de agora todos os m\xf3dulos que instalarmos\nv\xe3o para dentro da pasta ",(0,n.jsx)(a.code,{children:"lib"}),"."]}),"\n",(0,n.jsx)(a.p,{children:"Mas para usar o ambiente virtual sempre ser\xe1 necess\xe1rio efetuar a ativa\xe7\xe3o, no\nLinux isso \xe9 feito com o comando abaixo:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"source .venv/bin/activate\n"})}),"\n",(0,n.jsxs)(a.p,{children:["Ao rodar o ",(0,n.jsx)(a.code,{children:"activate"})," o seu prompt passa a exibir ",(0,n.jsx)(a.code,{children:"(.venv)"})," que \xe9 o nome do\nambiente virtual, e para se certificar execute novamente o m\xf3dulo ",(0,n.jsx)(a.code,{children:"site"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"python3 -m site\n"})}),"\n",(0,n.jsx)(a.p,{children:"Repare que agora os caminhos de bibliotecas (1 e 4 da lista) apontam para a\npasta isolada do seu projeto."}),"\n",(0,n.jsxs)(a.p,{children:["Outra forma de verificar qual ambiente Python est\xe1 ativado \xe9 usando o\ncomando ",(0,n.jsx)(a.code,{children:"which"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"which python\n"})}),"\n",(0,n.jsxs)(a.p,{children:["O retorno deve ser algo como ",(0,n.jsx)(a.code,{children:"~/Projects/python-base/.venv/bin/python"}),"."]}),"\n",(0,n.jsxs)(a.p,{children:[(0,n.jsx)(a.strong,{children:"IMPORTANTE"}),": Sempre que abrir um terminal, antes de executar os comandos,\nvoc\xea dever\xe1 ativar o ambiente virtual do seu projeto. Existem ferramentas que\npodem fazer isso automaticamente para voc\xea como o ",(0,n.jsx)(a.code,{children:"zsh"})," ou o ",(0,n.jsx)(a.code,{children:"poetry"}),"."]}),"\n",(0,n.jsx)(a.h2,{id:"git-ignore",children:"Git Ignore"}),"\n",(0,n.jsxs)(a.p,{children:["Em nosso projeto agora temos uma nova pasta ",(0,n.jsx)(a.code,{children:".venv"})," com centenas de arquivos e\nse fizermos um commit + push usando o git iremos mandar essa pasta toda para o\nreposit\xf3rio remoto do GitHub e queremos evitar isso, a ",(0,n.jsx)(a.code,{children:".venv"})," \xe9 apenas para\nuso local, se outra pessoa precisar executar seu c\xf3digo ela ter\xe1 que criar o\nambiente virtual diretamente l\xe1 no ambiente que precisar."]}),"\n",(0,n.jsxs)(a.p,{children:["Crie um arquivo chamado ",(0,n.jsx)(a.code,{children:".gitignore"})," na raiz do projeto"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"cd python-base\ntouch .gitignore\n"})}),"\n",(0,n.jsxs)(a.p,{children:["O comando ",(0,n.jsx)(a.code,{children:"touch"})," do Linux cria um arquivo vazio e ent\xe3o voc\xea pode abrir ele\ncom o seu editor para adicionar as pastas que queremos que fiquem de fora do\ncontrole do git."]}),"\n",(0,n.jsxs)(a.p,{children:["Basta abrir o ",(0,n.jsx)(a.code,{children:".gitignore"})," e adicionar a linha:"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{children:".venv\n"})}),"\n",(0,n.jsx)(a.p,{children:"Uma outra forma mais f\xe1cil de fazer isso \xe9 com este comando:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'echo ".venv" >> .gitignore\n'})}),"\n",(0,n.jsxs)(a.p,{children:["O comando acima adiciona o texto ",(0,n.jsx)(a.code,{children:".venv"})," no final do arquivo ",(0,n.jsx)(a.code,{children:".gitignore"}),"."]}),"\n",(0,n.jsxs)(a.p,{children:["Desta forma evitamos que a pasta venv v\xe1 para o git mas agora voc\xea precisa\nfazer um commit para adicionar o ",(0,n.jsx)(a.code,{children:".gitignore"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'git add .gitignore\ngit commit -m "adicionado git ignore"\ngit push\n'})}),"\n",(0,n.jsx)(a.h2,{id:"instalando-pacotes",children:"Instalando Pacotes"}),"\n",(0,n.jsx)(a.p,{children:"Agora sim podemos instalar pacotes dentro do nosso ambiente virtual :)"}),"\n",(0,n.jsxs)(a.p,{children:["Primeiro certifique-se de que ",(0,n.jsx)(a.code,{children:"(.venv)"})," aparece em seu terminal ou\nque ",(0,n.jsx)(a.code,{children:"which python"})," mostra o Python de dentro da pasta ",(0,n.jsx)(a.code,{children:".venv"}),"."]}),"\n",(0,n.jsxs)(a.p,{children:["Agora a primeira coisa a fazer \xe9 usar o ",(0,n.jsx)(a.code,{children:"pip"})," que \xe9 o gerenciador de pacotes do\nPython e atrav\xe9s dele podemos instalar novas bibliotecas e ferramentas."]}),"\n",(0,n.jsx)(a.p,{children:"Atualize o pr\xf3prio pip"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"python3 -m pip install --upgrade pip\n"})}),"\n",(0,n.jsx)(a.p,{children:"Com o pip atualizado vamos instalar nosso primeiro pacote e ele se chama\nIPython"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"python3 -m pip install ipython\n"})}),"\n",(0,n.jsx)(a.p,{children:"O Ipython \xe9 uma vers\xe3o do interpretador Python que possui mais funcionalidades."}),"\n",(0,n.jsxs)(a.p,{children:["Digite ",(0,n.jsx)(a.code,{children:"ipython"})," e perceba como ele \xe9 um pouco diferente do terminal que usamos\nanteriormente."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"$ ipython\n\nPython 3.10.2 (main, Jan 15 2022, 19:56:27) [GCC 11.1.0]\nType 'copyright', 'credits' or 'license' for more information\nIPython 8.0.1 -- An enhanced Interactive Python. Type '?' for help.\n\nIn [1]:\n"})}),"\n",(0,n.jsxs)(a.p,{children:["\xc9 bastante similar, a \xfanica grande diferen\xe7a que vai notar \xe9 que ao inv\xe9s de\nexibir o prompt padr\xe3o ",(0,n.jsx)(a.code,{children:">>>"}),", ele agora mostra ",(0,n.jsx)(a.code,{children:"In [1]:"})," e fica \xe0 espera de\nalguma instru\xe7\xe3o. Experimente digitar ",(0,n.jsx)(a.code,{children:"1 + 1"})]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-python",children:"In [1]: 1 + 1\nOut[1]: 2\n"})}),"\n",(0,n.jsxs)(a.p,{children:["Repare que a resposta vem em um novo prompt contendo ",(0,n.jsx)(a.code,{children:"Out [1]:"})," e isso \xe9\nbastante poderoso, pois ele grava um hist\xf3rico de todos os seus comandos e voc\xea\npode, por exemplo, digitar ",(0,n.jsx)(a.code,{children:"_1"})," ou ",(0,n.jsx)(a.code,{children:"_2"})," etc. para acessar o retorno de algum\ncomando que digitou anteriormente."]}),"\n",(0,n.jsxs)(a.p,{children:["Al\xe9m disso, o IPython possui uma ajuda mais completa usando ",(0,n.jsx)(a.code,{children:"?"})," ou ",(0,n.jsx)(a.code,{children:"??"})," ao\ninv\xe9s de usar ",(0,n.jsx)(a.code,{children:"help()"})]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-python",children:"In [4]: print?\nDocstring:\nprint(value, ..., sep=' ', end='\\n', file=sys.stdout, flush=False)\n\nPrints the values to a stream, or to sys.stdout by default.\nOptional keyword arguments:\nfile:  a file-like object (stream); defaults to the current sys.stdout.\nsep:   string inserted between values, default a space.\nend:   string appended after the last value, default a newline.\nflush: whether to forcibly flush the stream.\nType:      builtin_function_or_method\n"})}),"\n",(0,n.jsxs)(a.p,{children:["E tamb\xe9m oferece auto-complete. Experimente come\xe7ar a digitar, por exemplo, a\nletra ",(0,n.jsx)(a.code,{children:"p"})," e depois pressionar ",(0,n.jsx)(a.code,{children:"tab"})," e ele vai te mostrar um seletor com todos\nos objetos come\xe7ados pela letra ",(0,n.jsx)(a.code,{children:"p"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-python",children:"In [5]: p<tab>\n pass       %page      %pdef      %pinfo     %pprint    %psearch   %pycat     %%python2 \n pow()      %paste     %pdoc      %pinfo2    %precision %psource   %pylab     %%python3 \n print()    %pastebin  %%perl     %pip       %prun      %pushd     %%pypy               \n property   %pdb       %pfile     %popd      %%prun     %pwd       %%python             \n"})}),"\n",(0,n.jsx)(a.p,{children:"Recomendo que em todos os seus ambientes virtuais voc\xea adicione o IPython :)"})]})}function p(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,a,o)=>{o.d(a,{R:()=>r,x:()=>t});var n=o(6540);const s={},i=n.createContext(s);function r(e){const a=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(i.Provider,{value:a},e.children)}}}]);