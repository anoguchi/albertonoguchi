"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[4065],{4405:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>c});var o=n(4848),s=n(8453);const r={id:"manipulando-arquivos-e-pastas",title:"Manipulando arquivos e pastas",tags:["manipulando","arquivos","pastas","python"],sidebar_position:9},i="Interagindo com o sistema de arquivos",t={id:"python-base/base/manipulando-arquivos-e-pastas",title:"Manipulando arquivos e pastas",description:"Criar uma pasta",source:"@site/docs/python-base/base/manipulando-arquivos-e-pastas.md",sourceDirName:"python-base/base",slug:"/python-base/base/manipulando-arquivos-e-pastas",permalink:"/albertonoguchi/docs/python-base/base/manipulando-arquivos-e-pastas",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/python-base/base/manipulando-arquivos-e-pastas.md",tags:[{label:"manipulando",permalink:"/albertonoguchi/docs/tags/manipulando"},{label:"arquivos",permalink:"/albertonoguchi/docs/tags/arquivos"},{label:"pastas",permalink:"/albertonoguchi/docs/tags/pastas"},{label:"python",permalink:"/albertonoguchi/docs/tags/python"}],version:"current",sidebarPosition:9,frontMatter:{id:"manipulando-arquivos-e-pastas",title:"Manipulando arquivos e pastas",tags:["manipulando","arquivos","pastas","python"],sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Input e Output",permalink:"/albertonoguchi/docs/python-base/base/input-output"},next:{title:"Exception",permalink:"/albertonoguchi/docs/python-base/base/exception"}},l={},c=[{value:"Criar uma pasta",id:"criar-uma-pasta",level:3},{value:"Acessar uma pasta",id:"acessar-uma-pasta",level:3},{value:"Exibir a pasta atual",id:"exibir-a-pasta-atual",level:3},{value:"Criar um arquivo em branco",id:"criar-um-arquivo-em-branco",level:3},{value:"Listar arquivos",id:"listar-arquivos",level:3},{value:"Escrever em um arquivo",id:"escrever-em-um-arquivo",level:3},{value:"Ler o conte\xfado de um arquivo",id:"ler-o-conte\xfado-de-um-arquivo",level:3},{value:"Dicas \xfateis ao trabalhar com arquivos no Python",id:"dicas-\xfateis-ao-trabalhar-com-arquivos-no-python",level:3},{value:"Context manager",id:"context-manager",level:4},{value:"Criar diret\xf3rios n\xe3o existem em um caminho",id:"criar-diret\xf3rios-n\xe3o-existem-em-um-caminho",level:4},{value:"A Pathlib",id:"a-pathlib",level:3},{value:"Conclus\xe3o",id:"conclus\xe3o",level:3},{value:"Exemplo",id:"exemplo",level:3}];function d(e){const a={blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.h1,{id:"interagindo-com-o-sistema-de-arquivos",children:"Interagindo com o sistema de arquivos"}),"\n",(0,o.jsx)(a.h3,{id:"criar-uma-pasta",children:"Criar uma pasta"}),"\n",(0,o.jsx)(a.p,{children:"No Linux"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"$ mkdir pasta1\n"})}),"\n",(0,o.jsx)(a.p,{children:"No Python"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'>>> import os\n>>> os.mkdir("pasta2")\n'})}),"\n",(0,o.jsx)(a.h3,{id:"acessar-uma-pasta",children:"Acessar uma pasta"}),"\n",(0,o.jsx)(a.p,{children:"No linux"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"$ cd pasta1\n"})}),"\n",(0,o.jsx)(a.p,{children:"No Python"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'>>> import os\n>>> os.chdir("pasta2")\n'})}),"\n",(0,o.jsx)(a.h3,{id:"exibir-a-pasta-atual",children:"Exibir a pasta atual"}),"\n",(0,o.jsx)(a.p,{children:"No Linux"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"$ pwd\n/path/pasta1\n"})}),"\n",(0,o.jsx)(a.p,{children:"No Python"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:">>> import os\n>>> os.path.abspath(os.curdir)\n/path/pasta2\n"})}),"\n",(0,o.jsx)(a.h3,{id:"criar-um-arquivo-em-branco",children:"Criar um arquivo em branco"}),"\n",(0,o.jsx)(a.p,{children:"No linux"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"$ touch arquivo.txt\n"})}),"\n",(0,o.jsx)(a.p,{children:"No Python"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'>>> open("arquivo.txt", "w")\n'})}),"\n",(0,o.jsx)(a.h3,{id:"listar-arquivos",children:"Listar arquivos"}),"\n",(0,o.jsx)(a.p,{children:"No linux:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"$ ls\narquivo.txt\n"})}),"\n",(0,o.jsx)(a.p,{children:"No Python"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:">>> import os\n>>> os.listdir(\".\")\n['arquivo.txt']\n"})}),"\n",(0,o.jsx)(a.h3,{id:"escrever-em-um-arquivo",children:"Escrever em um arquivo"}),"\n",(0,o.jsx)(a.p,{children:"No Linux"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:'$ echo "Hello" >> arquivo.txt\n'})}),"\n",(0,o.jsxs)(a.blockquote,{children:["\n",(0,o.jsxs)(a.p,{children:[(0,o.jsx)(a.strong,{children:"nota"})," ",(0,o.jsx)(a.code,{children:'"w"'})," escreve no modo ",(0,o.jsx)(a.code,{children:"w"})," substituindo todo o conte\xfado do arquivo e\n",(0,o.jsx)(a.code,{children:'"a"'})," escreve no modo ",(0,o.jsx)(a.code,{children:"a"})," fazendo append no final do arquivo existente."]}),"\n"]}),"\n",(0,o.jsx)(a.h3,{id:"ler-o-conte\xfado-de-um-arquivo",children:"Ler o conte\xfado de um arquivo"}),"\n",(0,o.jsx)(a.p,{children:"No Linux"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"$ cat arquivo.txt\nHello\n"})}),"\n",(0,o.jsx)(a.p,{children:"No Python"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'>>> print(open("arquivo.txt", "r").read())\n\'Hello\\n\'\n'})}),"\n",(0,o.jsx)(a.h3,{id:"dicas-\xfateis-ao-trabalhar-com-arquivos-no-python",children:"Dicas \xfateis ao trabalhar com arquivos no Python"}),"\n",(0,o.jsx)(a.h4,{id:"context-manager",children:"Context manager"}),"\n",(0,o.jsxs)(a.p,{children:["N\xf3s ainda n\xe3o falamos sobre este tema, mas para trabalhar com arquivos ele \xe9 essencial, no exemplo de escrita em arquivos n\xf3s tivemos que chamar a fun\xe7\xe3o\n",(0,o.jsx)(a.code,{children:".close()"})," explicitamente."]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'>>> arquivo =  open("arquivo.txt", "a")\n>>> arquivo.write("Hello\\n")\n>>> arquivo.close()\n'})}),"\n",(0,o.jsxs)(a.p,{children:["Como \xe9 muito importante manter os descritores de arquivo devidamente encerrados\nem Python sempre ao abrir um arquivo iremos dar prefer\xeancia para o uso de um context manager, que \xe9 um bloco especial de c\xf3digo que automaticamente executa opera\xe7\xf5es como o ",(0,o.jsx)(a.code,{children:".close"})," em arquivos."]}),"\n",(0,o.jsx)(a.p,{children:"A maneira preferida ser\xe1 sempre:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'with open("arquivo.txt", "a") as arquivo:\n    # aqui temos o arquivo aberto para escrever\n    \n    arquivo.write("Hello")\n\n    # aqui o context manager garante o fechamento do arquivo \n    # sem a necessidade de chamarmos explicitamente o .close()\n'})}),"\n",(0,o.jsx)(a.h4,{id:"criar-diret\xf3rios-n\xe3o-existem-em-um-caminho",children:"Criar diret\xf3rios n\xe3o existem em um caminho"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:">>> os.mkdir(\"um/outro/maisoutro/)\nFileNotFoundError: [Errno 2] No such file or directory: 'um/outro/maisoutro/'\n"})}),"\n",(0,o.jsxs)(a.p,{children:["Para o c\xf3digo acima funcionar ter\xedamos que criar primeiro ",(0,o.jsx)(a.code,{children:"um"})," e depois ",(0,o.jsx)(a.code,{children:"outro"}),"\ne assim por diante, portanto quando temos m\xfaltiplas pastas para criar vamos\npreferir usar a fun\xe7\xe3o ",(0,o.jsx)(a.code,{children:"makedirs"})]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'>>> os.makedirs("um/outro/maisoutro", exist_ok=True)\n>>> os.listdir("um")\n[\'outro\']\n>>> os.listdir("um/outro")\n[\'maisoutro\']\n'})}),"\n",(0,o.jsx)(a.p,{children:"Ler m\xfaltiplas linhas de um arquivo"}),"\n",(0,o.jsxs)(a.p,{children:["Um arquivo de texto pode ter milhares de linhas e ao efetuar a leitura com\n",(0,o.jsx)(a.code,{children:".read"})," isso pode causar um estouro de mem\xf3ria:"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'>>> open("arquivo_grande.txt", "r").read()\nError: Not Enough Memory to load 20GB\n'})}),"\n",(0,o.jsx)(a.p,{children:"Neste caso devemos usar o procolo de itera\xe7\xe3o,\nos file descriptors s\xe3o iter\xe1veis, e melhor que isso eles s\xe3o geradores de\ndados."}),"\n",(0,o.jsx)(a.p,{children:"Isso quer dizer que dentro de um loop, a leitura do arquivo linha a linha ser\xe1 mais eficiente:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'for linha in open("arquivo_grande.txt", "r"):\n    print(linha)\n'})}),"\n",(0,o.jsxs)(a.p,{children:["Vai imprimir tranquilamente pois mesmo que o arquivo tenha ",(0,o.jsx)(a.code,{children:"20GB"})," ser\xe1\ncarregado para a mem\xf3ria apenas uma linha de cada vez."]}),"\n",(0,o.jsx)(a.p,{children:"Escrever m\xfaltiplas linhas em um arquivo"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'texto = [\n    "Este \xe9 um texto",\n    "cada item desta lista",\n    "\xe9 uma linha no arquivo",\n]\n\nwith open("arquivo.txt", "a") as arquivo:\n    arquivo.writelines("\\n".join(texto))\n'})}),"\n",(0,o.jsx)(a.p,{children:"No linux pode ler com:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-bash",children:"$ cat arquivo.txt\nEste \xe9 um texto\ncada item desta lista\n\xe9 uma linha no arquivo\n"})}),"\n",(0,o.jsx)(a.p,{children:"Lendo multiplas linhas de um arquivo"}),"\n",(0,o.jsxs)(a.blockquote,{children:["\n",(0,o.jsx)(a.p,{children:"Lembrando que isso s\xf3 deve ser feito em arquivos de tamanho pequeno."}),"\n"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:">>> open(\"arquivo.txt\").readlines()\n['Este \xe9 um texto\\n', 'cada item desta lista\\n', '\xe9 uma linha no arquivo']\n"})}),"\n",(0,o.jsx)(a.p,{children:"Trabalhando com caminhos"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'# Juntando caminhos\n>>> import os\n>>> os.path.join("pasta2/pasta3/arquivo.txt")\npasta2/pasta3/arquivo.txt\n\n# Obtendo caminho absoluto\n>>> os.path.abspath(os.path.join("pasta2/pasta3/arquivo.txt"))\n/home/user/pasta2/pasta3/arquivo.txt\n\n# Obtendo o caminho absoluto para o diretorio atual\n>>> os.path.abspath(os.curdir)\n/tmp/pasta2/foo/\n'})}),"\n",(0,o.jsx)(a.h3,{id:"a-pathlib",children:"A Pathlib"}),"\n",(0,o.jsxs)(a.p,{children:["A pathlib foi adicionada no Python 3 e prov\xea as mesmas funcionalidades do ",(0,o.jsx)(a.code,{children:"os"}),"\ne ",(0,o.jsx)(a.code,{children:"open"})," com algumas melhorias de sintaxe."]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'>>> from pathlib import Path\n# Criar pasta\n>>> Path("pasta3").mkdir(parents=True, exist_ok=True)\n# Criar arquivo na pasta\n>>> Path("pasta3/arquivo.txt").touch()\n# Escrever no arquivo\n>>> Path("pasta3/arquivo.txt").write_text("Bruno")\n# Ler o conte\xfado do arquivo\n>>> Path("pasta3/arquivo.txt").read_text()\n\'Bruno\'\n'})}),"\n",(0,o.jsxs)(a.p,{children:["Uma caracter\xedstica interessante do objeto ",(0,o.jsx)(a.code,{children:"Path"})," \xe9 que ele permite ser\ncombinado com outros objetos do mesmo tipo ou ",(0,o.jsx)(a.code,{children:"str"})," usando ",(0,o.jsx)(a.code,{children:"/"}),"."]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'>>> caminho = Path("pasta1") / "pasta2" / Path("pasta3")\n>>> print(caminho)\npasta1/pasta2/pasta3\n'})}),"\n",(0,o.jsx)(a.h3,{id:"conclus\xe3o",children:"Conclus\xe3o"}),"\n",(0,o.jsxs)(a.p,{children:["A escolha entre utilizar ",(0,o.jsx)(a.code,{children:"os"})," ou ",(0,o.jsx)(a.code,{children:"pathlib"})," se d\xe1 pelo gosto de quem est\xe1 programando. As funcionalidades s\xe3o as mesmas e na maioria dos casos as fun\xe7\xf5es executadas ser\xe3o as mesmas, cabe a quem estiver programando verificar qual das interfaces est\xe1 lidando na hora de interagir com os objetos file descriptors."]}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.img,{alt:"guia de referencia",src:n(4409).A+"",width:"973",height:"942"})}),"\n",(0,o.jsx)(a.h3,{id:"exemplo",children:"Exemplo"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""Bloco de notas\n\n$ notes.py new "Minha Nota"\ntag: tech\ntext: \nAnotacao geral sobre carreira de tecnologia\n\n$ notes.py 1 tech\n...\n...\n"""\n__version__ = "0.1.0"\n\nimport os\nimport sys\n\ncmds = ("read", "new")\npath = os.curdir\nfilepath = os.path.join(path, "notes.txt")\n\narguments = sys.argv[1:]\nif not arguments:\n    print("Invalid usage")\n    print(f"you must specify subcommand {cmds}")\n    sys.exit(1)\n\nif arguments[0] not in cmds:\n    print(f"Invalid command {argument[0]}")\n\nif arguments[0] == "read":\n    # leitura das notas\n    for line in open(filepath):\n        title, tag, text = line.split("\\t")\n        if tag.lower() == arguments[1].lower():\n            print(f"title: {title}")\n            print(f"text: {text}")\n            print("-" * 30)\n            print()\n\nif arguments[0] == "new":\n    title = arguments[1]\n    text = [\n        f"{title}",\n        input("tag:").strip(),\n        input("text:\\n").strip(),\n    ]\n    # \\t - tsv\n    with open(filepath, "a") as file_:\n        file_.write("\\t".join(text) + "\\n")\n'})})]})}function u(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},4409:(e,a,n)=>{n.d(a,{A:()=>o});const o=n.p+"assets/images/manipulando-arquivos-referencia-eeb4928106a656602d7d8fd1496796e8.png"},8453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>t});var o=n(6540);const s={},r=o.createContext(s);function i(e){const a=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:a},e.children)}}}]);